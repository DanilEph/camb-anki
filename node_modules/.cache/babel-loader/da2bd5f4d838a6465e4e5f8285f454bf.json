{"ast":null,"code":"import _objectSpread from\"/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"placeholder\",\"options\",\"value\",\"onChangeValue\"];/** @jsxImportSource @emotion/react */import{css}from'@emotion/react';import React,{useEffect,useRef,useState}from'react';import{theme}from'utils/theme';import{Input}from'../Input';import Option from'./Option';import{jsx as _jsx}from\"@emotion/react/jsx-runtime\";import{jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";;var styles={root:{base:css({position:'relative'})},menu:{base:css({background:theme.palette.secondary.darker,borderRadius:'12px',fontSize:'14px',marginTop:'10px',boxShadow:'0px 0px 4px 3px rgba(34, 60, 80, 0.2)',position:'absolute',zIndex:'5',width:'100%',outline:\"2px solid \".concat(theme.palette.primary.lightest)}),hidden:css({display:'none'})}};var Select=function Select(_ref){var placeholder=_ref.placeholder,options=_ref.options,value=_ref.value,_ref$onChangeValue=_ref.onChangeValue,onChangeValue=_ref$onChangeValue===void 0?function(){}:_ref$onChangeValue,other=_objectWithoutProperties(_ref,_excluded);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpened=_useState2[0],setIsOpened=_useState2[1];var rootRef=useRef(null);useEffect(function(){var handleClickOutside=function handleClickOutside(event){if(rootRef.current&&!rootRef.current.contains(event.target)){setIsOpened(false);}};document.addEventListener('click',handleClickOutside,true);return function(){document.removeEventListener('click',handleClickOutside,true);};},[]);var getNameById=function getNameById(id){var _options$find;return(_options$find=options.find(function(elem){return elem.id===id;}))===null||_options$find===void 0?void 0:_options$find.name;};var handleKeyPress=function handleKeyPress(e){if(e.key==='Tab'||e.key==='Escape'){setIsOpened(false);e.currentTarget.blur();}};return _jsxs(\"div\",_objectSpread(_objectSpread({ref:rootRef,css:styles.root.base},other),{},{children:[_jsx(Input,{placeholder:placeholder,value:getNameById(value),onFocus:function onFocus(){return setIsOpened(true);},onKeyDown:function onKeyDown(e){return handleKeyPress(e);}}),_jsx(\"div\",{css:[styles.menu.base,!isOpened&&styles.menu.hidden],children:options.map(function(option){return _jsx(Option,{id:option.id,isChecked:value===option.id,onClick:function onClick(){onChangeValue(option.id);setIsOpened(false);},children:option.name});})})]}));};export default Select;","map":{"version":3,"names":["css","React","useEffect","useRef","useState","theme","Input","Option","styles","root","base","position","menu","background","palette","secondary","darker","borderRadius","fontSize","marginTop","boxShadow","zIndex","width","outline","primary","lightest","hidden","display","Select","placeholder","options","value","onChangeValue","other","isOpened","setIsOpened","rootRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","getNameById","id","find","elem","name","handleKeyPress","e","key","currentTarget","blur","map","option"],"sources":["/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/src/components/UI/Select/Select.tsx"],"sourcesContent":["/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport React, { createContext, FC, useEffect, useRef, useState } from 'react';\nimport { theme } from 'utils/theme';\nimport { Input } from '../Input';\nimport Option from './Option';\n\ninterface OptionType {\n  id: string,\n  name: string,\n}\n\ninterface ISelectProps extends React.HTMLAttributes<HTMLDivElement> {\n  options: OptionType[],\n  value?: string | undefined,\n  onChangeValue?: (newValue: string) => void,\n  placeholder?: string,\n};\n\nconst styles = {\n  root: {\n    base: css({\n      position: 'relative',\n    })\n  },\n  menu: {\n    base: css({\n      background: theme.palette.secondary.darker,\n      borderRadius: '12px',\n      fontSize: '14px',\n      marginTop: '10px',\n      boxShadow: '0px 0px 4px 3px rgba(34, 60, 80, 0.2)',\n      position: 'absolute',\n      zIndex: '5',\n      width: '100%',\n      outline: `2px solid ${theme.palette.primary.lightest}`,\n    }),\n    hidden: css({\n      display: 'none',\n    })\n  }\n}\n\nconst Select: FC<ISelectProps> = ({ placeholder, options, value, onChangeValue = () => {}, ...other }) => {\n  const [isOpened, setIsOpened] = useState(false);\n  const rootRef = useRef<HTMLDivElement>(null); \n\n  useEffect(() => {\n    const handleClickOutside = (event: any) => {\n      if (rootRef.current && !rootRef.current.contains(event.target)) {\n        setIsOpened(false);\n      }\n    };\n    document.addEventListener('click', handleClickOutside, true);\n    return () => {\n      document.removeEventListener('click', handleClickOutside, true);\n    };\n  }, []);\n\n  const getNameById = (id: string | undefined) => {\n    return options.find((elem) => elem.id === id)?.name;\n  }\n\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Tab' || e.key === 'Escape') {\n      setIsOpened(false);\n      e.currentTarget.blur();\n    }\n  } \n\n  return (\n    <div\n      ref={rootRef}\n      css={styles.root.base}\n      {...other}\n    >\n      <Input \n        placeholder={placeholder}\n        value={getNameById(value)} \n        onFocus={() => setIsOpened(true)} \n        onKeyDown={(e) => handleKeyPress(e)}/>\n      <div\n        css={[\n          styles.menu.base,\n          !isOpened && styles.menu.hidden,\n        ]}\n      >\n        {options.map((option) => (\n          <Option id={option.id} isChecked={value === option.id} onClick={() => {onChangeValue(option.id); setIsOpened(false)}}>{option.name}</Option>\n        ))}\n      </div>\n    </div>\n  )\n};\n\nexport default Select;"],"mappings":"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"},"metadata":{},"sourceType":"module"}