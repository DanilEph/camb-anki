{"ast":null,"code":"import _objectSpread from\"/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"small\"];/** @jsxImportSource @emotion/react */import{css}from'@emotion/react';import Button from'components/UI/Button/Button';import{Input}from'components/UI/Input';import Space from'components/UI/Space/Space';import{useAxios}from'hooks/useAxios';import React,{useEffect,useLayoutEffect,useState}from'react';import{PulseLoader}from'react-spinners';import{useRecoilState}from'recoil';import{searchWord}from'services/cambParser';import{isSearchingState}from'store/isSearching';import{searchErrorState}from'store/searchError';import{searchingWordState}from'store/searchingWord';import{wordDataState}from'store/wordData';import{theme}from'utils/theme';import{jsx as _jsx}from\"@emotion/react/jsx-runtime\";import{jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";;var styles={root:{base:css({position:'relative'})},input:{base:function base(_ref){var buttonWidth=_ref.buttonWidth;return css({flexGrow:1,'> input':{paddingRight:buttonWidth+15}});}},button:{base:css({position:'absolute',zIndex:2,right:0,// borderRadius: '0 12px 12px 0',\nborderTopLeftRadius:0,borderBottomLeftRadius:0})}};var Search=function Search(_ref2){var _ref2$small=_ref2.small,small=_ref2$small===void 0?false:_ref2$small,other=_objectWithoutProperties(_ref2,_excluded);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),buttonWidth=_useState2[0],setButtonWidth=_useState2[1];var _useAxios=useAxios(searchWord),_useAxios2=_slicedToArray(_useAxios,2),searchWordRequest=_useAxios2[0],_useAxios2$=_useAxios2[1],data=_useAxios2$.data,loading=_useAxios2$.loading,error=_useAxios2$.error;var _useRecoilState=useRecoilState(searchingWordState),_useRecoilState2=_slicedToArray(_useRecoilState,2),searchingWord=_useRecoilState2[0],setSearchingWord=_useRecoilState2[1];var _useRecoilState3=useRecoilState(wordDataState),_useRecoilState4=_slicedToArray(_useRecoilState3,2),wordData=_useRecoilState4[0],setWordData=_useRecoilState4[1];var _useRecoilState5=useRecoilState(isSearchingState),_useRecoilState6=_slicedToArray(_useRecoilState5,2),isSearching=_useRecoilState6[0],setIsSearching=_useRecoilState6[1];var _useRecoilState7=useRecoilState(searchErrorState),_useRecoilState8=_slicedToArray(_useRecoilState7,2),searchError=_useRecoilState8[0],setSearchError=_useRecoilState8[1];useLayoutEffect(function(){var searchButton=document.querySelector('.search-button');if(searchButton){setButtonWidth(Number(searchButton.offsetWidth));}},[]);useEffect(function(){if(data){setSearchError(undefined);setWordData(data);var main=document.querySelector('main');main===null||main===void 0?void 0:main.scrollTo(0,0);}},[data]);useEffect(function(){setIsSearching(loading);},[loading]);useEffect(function(){if(error){setWordData(undefined);setSearchError(error);}},[error]);var searchHandler=function searchHandler(){if(searchingWord!==''){var res=searchWordRequest({word:searchingWord});}};var inputHandler=function inputHandler(e){setSearchingWord(e.currentTarget.value);};var engterDownHandler=function engterDownHandler(e){if(e.key==='Enter'){e.preventDefault();searchHandler();}};return _jsxs(Space,_objectSpread(_objectSpread({css:[styles.root.base]},other),{},{children:[_jsx(Input,{placeholder:\"Search for a word...\",withLabel:false,css:[styles.input.base({buttonWidth:buttonWidth})],sizing:small?'medium':'large',onChange:function onChange(e){return inputHandler(e);},value:searchingWord,autoFocus:true,onKeyDown:function onKeyDown(e){return engterDownHandler(e);}}),_jsx(Button,{size:small?'medium':'large',className:'search-button',css:[styles.button.base],onClick:searchHandler,children:isSearching?_jsx(PulseLoader,{size:\"6px\",color:theme.palette.secondary.normal}):'Search'})]}));};export default Search;","map":{"version":3,"names":["css","Button","Input","Space","useAxios","React","useEffect","useLayoutEffect","useState","PulseLoader","useRecoilState","searchWord","isSearchingState","searchErrorState","searchingWordState","wordDataState","theme","styles","root","base","position","input","buttonWidth","flexGrow","paddingRight","button","zIndex","right","borderTopLeftRadius","borderBottomLeftRadius","Search","small","other","setButtonWidth","searchWordRequest","data","loading","error","searchingWord","setSearchingWord","wordData","setWordData","isSearching","setIsSearching","searchError","setSearchError","searchButton","document","querySelector","Number","offsetWidth","undefined","main","scrollTo","searchHandler","res","word","inputHandler","e","currentTarget","value","engterDownHandler","key","preventDefault","palette","secondary","normal"],"sources":["/Users/macbookpro/Documents/my-repository/web/cambridge-anki/extention/src/components/Search/Search.tsx"],"sourcesContent":["/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport Button from 'components/UI/Button/Button';\nimport { Input } from 'components/UI/Input';\nimport Space from 'components/UI/Space/Space';\nimport { useAxios } from 'hooks/useAxios';\nimport { WordType } from 'models/WordType';\nimport React, { FC, useEffect, useLayoutEffect, useState } from 'react';\nimport { PulseLoader } from 'react-spinners';\nimport { useRecoilState } from 'recoil';\nimport { searchWord } from 'services/cambParser';\nimport { SearchWordType } from 'services/cambParser/searchWord';\nimport { isSearchingState } from 'store/isSearching';\nimport { searchErrorState } from 'store/searchError';\nimport { searchingWordState } from 'store/searchingWord';\nimport { wordDataState } from 'store/wordData';\nimport { theme } from 'utils/theme';\n\ninterface ISearchProps extends React.HTMLAttributes<HTMLElement> {\n  small?: boolean;\n};\n\nconst styles = {\n  root: {\n    base: css({\n      position: 'relative',\n    })\n  },\n  input: {\n    base: ({ buttonWidth }: {buttonWidth: number}) => css({\n      flexGrow: 1,\n      '> input': {\n        paddingRight: buttonWidth + 15,\n      }\n    })\n  },\n  button: {\n    base: css({\n      position: 'absolute',\n      zIndex: 2,\n      right: 0,\n      // borderRadius: '0 12px 12px 0',\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0,\n    })\n  }\n}\n\nconst Search: FC<ISearchProps> = ({ small = false, ...other }) => {\n  const [buttonWidth, setButtonWidth] = useState(0);\n  const [searchWordRequest, { data, loading, error }] = useAxios<SearchWordType, WordType[]>(searchWord);\n  const [searchingWord, setSearchingWord] = useRecoilState(searchingWordState);\n  const [wordData, setWordData] = useRecoilState(wordDataState);\n  const [isSearching, setIsSearching] = useRecoilState(isSearchingState);\n  const [searchError, setSearchError] = useRecoilState(searchErrorState);\n\n  useLayoutEffect(() => {\n    const searchButton = document.querySelector<HTMLButtonElement>('.search-button');\n    \n    if (searchButton) {\n      setButtonWidth(Number(searchButton.offsetWidth));\n    }\n\n  }, []);\n\n  useEffect(() => {\n    if (data) {\n      setSearchError(undefined);\n      setWordData(data);\n      const main = document.querySelector('main');\n      main?.scrollTo(0,0);\n    }\n  }, [data]);\n\n  useEffect(() => {\n    setIsSearching(loading);\n  }, [loading])\n\n  useEffect(() => {\n    if (error) {\n      setWordData(undefined);\n      setSearchError(error);\n    }\n  }, [error])\n\n  const searchHandler = () => {\n    if (searchingWord !== '') {\n      const res = searchWordRequest({word: searchingWord});\n    }\n  }\n\n  const inputHandler = (e: React.FormEvent<HTMLInputElement>) => {\n    setSearchingWord(e.currentTarget.value);\n  }\n\n  const engterDownHandler = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      searchHandler();\n    }\n  }\n\n  return (\n    <Space\n      css={[styles.root.base]}\n      {...other}\n    >\n    <Input \n      placeholder='Search for a word...' \n      withLabel={false}\n      css={[styles.input.base({buttonWidth})]}\n      sizing={small ? 'medium' : 'large'}\n      onChange={(e) => inputHandler(e)}\n      value={searchingWord}\n      autoFocus\n      onKeyDown={(e) => engterDownHandler(e)}\n    />\n    <Button\n      size={small ? 'medium' : 'large'}\n      className={'search-button'} \n      css={[styles.button.base]}\n      onClick={searchHandler}\n    >\n      {isSearching ? <PulseLoader size=\"6px\" color={theme.palette.secondary.normal} /> : 'Search'}\n    </Button>\n  </Space>\n  )\n};\n\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}